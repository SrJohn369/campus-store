{% extends "perfil_vendedor.html" %}
{% block abas %}
    <div class="produtos-container">
        <div class="title">
            <h1>Adicionar Produto:</h1>
        </div>
        <form action="">
            <div class="inputs">
                <div class="inputs1">
                    <div class="inputs-l">
                        <img src="{{data_user.foto.url}}" class="img-prod" alt="foto do produto" id="profile-pic">
                        <div class="btn-foto">
                            <label for="input-file"><i class="fa-solid fa-camera"></i></label>
                            <input type="file" accept="img/jpeg, img/jpg, img/png" style="display: none;" id="input-file" name="input-file">
                        </div>
                    </div>
                    <div class="inputs-l">
                        <label for="tit-serv">Título do Produto:</label>
                        <input type="text" id="tit-serv">
                    </div>
                </div>
                <div class="inputs-l">
                    <label for="desc-serv">Descrição:</label>
                    <textarea id="desc-serv" name="w3review" rows="7" cols="30">
                    </textarea>
                    <div class="inputs-l">
                        <label for="val-serv">Valor:</label>
                        <input type="number" id="val-serv" step="0.01" placeholder="0,00">
                    </div>
                </div>
            </div>
            <div id="btn">
                <input class="btn" type="button" value="Salvar">
            </div>
        </form>
    </div>
{% endblock abas %}

{% block scripts %}
<script>
    // Função para verificar se há uma imagem salva no armazenamento local
    function checkLocalStorage() {
        let savedImage = localStorage.getItem('profileImage');
        if (savedImage) {
            profilePic.src = savedImage;
        }
    }

    let profilePic = document.getElementById('profile-pic');
    let inputFile = document.getElementById('input-file');

    // Verificar se há uma imagem salva ao carregar a página
    document.addEventListener('DOMContentLoaded', checkLocalStorage);

    inputFile.onchange = function () {
        // Atualizar a imagem e salvar o caminho no armazenamento local
        profilePic.src = URL.createObjectURL(inputFile.files[0]);
        localStorage.setItem('profileImage', profilePic.src);
    }
</script>
{% endblock scripts %}