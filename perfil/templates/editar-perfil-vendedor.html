{% extends "perfil_vendedor.html" %}
{% block abas %}

<div class="formulario">
    <div class="form">{% csrf_token %}
        <form action="/submit_form" method="post">             
            <div class="mudar-senha">
                <div class="img-perfil">
                    <img src="{{data_user.foto.url}}" alt="foto do usuário" id="profile-pic">
                    <div class="btn">
                        <label for="input-file"><i class="fa-solid fa-camera"></i></label>
                        <input type="file" accept="img/jpeg, img/jpg, img/png" style="display: none;" id="input-file" name="input-file">
                    </div>
                </div>

                <div id="info">
                    <p class="info-txt">Marcela Lima</p>
                    <p class="info-txt">2022211mtds0085</p>
                </div>
            </div>

    
            <div class="div-input">
                <label for="nome">Nome:</label>
                <input type="text" id="nome" name="nome" class="form-input">
            </div>
          
            <div class="div-input">
                <label for="email">E-mail:</label>
                <input type="email" id="email" name="email" class="form-input">
            </div>
          
            <div class="div-input">
                <label for="negocio">Nome do Negócio:</label>
                <div class="box"><input type="text" id="negocio" name="negocio" class="form-input"></div>
            </div>
          
            <div class="div-input">
                <label for="rede_social">Rede Social:</label>
                <div id="redes_sociais">
                  <input type="url" id="rede_social_1" name="rede_social[]" class="form-input">
                  <button type="button" onclick="addRedeSocial()">+</button>
                </div>
            </div>
          
            <div class="div-input">
                <label for="sobrenome">Sobrenome:</label>
                <input type="text" id="sobrenome" name="sobrenome" class="form-input">
            </div>
          
            <div class="div-input">
                <label for="telefone">Telefone:</label>
                <input type="tel" id="telefone" name="telefone" class="form-input">
            </div>
          
            <div class="div-input">
                <label for="descricao">Descrição:</label><br>
                <textarea id="descricao" name="descricao" rows="4" cols="50" class="form-input"></textarea>
            </div>
          
            <div class="div-input">
                <input type="submit" value="Salvar" class="botão">
            </div>
        </form>    
          <script>
            let contadorRedesSociais = 1;
          
            function addRedeSocial() {
              contadorRedesSociais++;
              const divRedeSocial = document.createElement('div');
              divRedeSocial.innerHTML = `<input type="url" id="rede_social_${contadorRedesSociais}" name="rede_social[]">`;
              document.getElementById('redes_sociais').appendChild(divRedeSocial);
            }
          
            function salvarInformacoes() {
              // Aqui você pode adicionar o código para salvar as informações do formulário
              // Por exemplo, enviar uma solicitação para salvar os dados no servidor
              alert('Informações salvas! Implemente a lógica de salvamento no código.');
            }
          </script>
    </div>
</div>

{% endblock abas %}
{% block scripts %}
<script>
    // Função para verificar se há uma imagem salva no armazenamento local
    function checkLocalStorage() {
        let savedImage = localStorage.getItem('profileImage');
        if (savedImage) {
            profilePic.src = savedImage;
        }
    }

    let profilePic = document.getElementById('profile-pic');
    let inputFile = document.getElementById('input-file');

    // Verificar se há uma imagem salva ao carregar a página
    document.addEventListener('DOMContentLoaded', checkLocalStorage);

    inputFile.onchange = function () {
        // Atualizar a imagem e salvar o caminho no armazenamento local
        profilePic.src = URL.createObjectURL(inputFile.files[0]);
        localStorage.setItem('profileImage', profilePic.src);
    }
</script>
{% endblock scripts %}